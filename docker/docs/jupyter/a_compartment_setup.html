

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>1. Compartment, CompartmentPrototype and Probes Setup &mdash; NxSDK 1.0.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="2. Connecting compartments" href="b_connecting_compartments.html" />
    <link rel="prev" title="NxNet Jupyter Tutorials" href="../nxnet_jupyter_tutorials.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> NxSDK
          

          
          </a>

          
            
            
              <div class="version">
                1.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introductory Material</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nxapi.html">NxAPI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nxnet.html">NxNet API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nxcore.html">NxCore API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../composable.html">Composability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../embedded_execution_engine.html">Embedded Execution Engine</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../tutorials.html">Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../nxnet_tutorials.html">NxNet Tutorials</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../nxnet_jupyter_tutorials.html">NxNet Jupyter Tutorials</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">1. Compartment, CompartmentPrototype and Probes Setup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Basic-compartment-with-probes">1.1. Basic compartment with probes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Compartment-with-compartmentVoltageDecay">1.2. Compartment with compartmentVoltageDecay</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Compartment-with-(stochastic)-compartmentVoltage">1.3. Compartment with (stochastic) compartmentVoltage</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Compartment-with-(stochastic)-refractoryDelay">1.4. Compartment with (stochastic) refractoryDelay</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Set-membrane-potential-threshold-VTh">1.5. Set membrane potential threshold VTh</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="b_connecting_compartments.html">2. Connecting compartments</a></li>
<li class="toctree-l3"><a class="reference internal" href="c_stimulating_compartments.html">3. Stimulating compartments</a></li>
<li class="toctree-l3"><a class="reference internal" href="d_synaptic_plasticity.html">4. Synaptic plasticity</a></li>
<li class="toctree-l3"><a class="reference internal" href="e_neuronal_homeostasis.html">5. Neuronal homeostasis</a></li>
<li class="toctree-l3"><a class="reference internal" href="f_rewards_learning.html">6. Learning with Rewards</a></li>
<li class="toctree-l3"><a class="reference internal" href="g_snip_for_threshold_modulation.html">7. SNIPs</a></li>
<li class="toctree-l3"><a class="reference internal" href="h_reward_trace.html">8. Reward Trace</a></li>
<li class="toctree-l3"><a class="reference internal" href="i_performance_profiling.html">9. Performance profiling</a></li>
<li class="toctree-l3"><a class="reference internal" href="j_soft_reset_core.html">10. Hard vs. soft membrane voltage reset</a></li>
<li class="toctree-l3"><a class="reference internal" href="j_soft_reset_net.html">11. Soft reset membrane voltage</a></li>
<li class="toctree-l3"><a class="reference internal" href="k_interactive_spike_sender_receiver.html">12. Interactive Spike Sender and Spike Receivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="l_snip_for_compartment_setup_with_NxNet_C.html">13. Setup Compartments with NxNet C API</a></li>
<li class="toctree-l3"><a class="reference internal" href="m_independent_networks_in_same_run.html">14. Independent Networks in Same Run</a></li>
<li class="toctree-l3"><a class="reference internal" href="n_stochastic_networks.html">15. Stochastic Networks</a></li>
<li class="toctree-l3"><a class="reference internal" href="n_stochastic_networks.html#C.-Puttin-It-All-Together">16. C. Puttin It All Together</a></li>
<li class="toctree-l3"><a class="reference internal" href="n_stochastic_networks.html#Modify-createWtaMotif1-to-Include-Detector-Neuron">17. Modify createWtaMotif1 to Include Detector Neuron</a></li>
<li class="toctree-l3"><a class="reference internal" href="o_snip_for_reading_lakemont_spike_count.html">18. Read Lakemont Spike Count</a></li>
<li class="toctree-l3"><a class="reference internal" href="p_composable_networks.html">19. Composable Networks</a></li>
<li class="toctree-l3"><a class="reference internal" href="q_connection_sharing.html">20. Connection Sharing</a></li>
<li class="toctree-l3"><a class="reference internal" href="r_stubs_and_netmodules.html">21. Stubs and NetModules</a></li>
<li class="toctree-l3"><a class="reference internal" href="r_stubs_and_netmodules.html#NetModules">22. NetModules</a></li>
<li class="toctree-l3"><a class="reference internal" href="s_multicx_neuron_self_reward.html">23. Implementation of a multi-compartment neuron with self-reward feedback</a></li>
<li class="toctree-l3"><a class="reference internal" href="t_vMinExp_and_vMaxExp.html">24. vMinExp and vMaxExp Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="u_join_op_in_multi_compartment_neuron.html">25. Neurons vs Compartments</a></li>
<li class="toctree-l3"><a class="reference internal" href="u_join_op_in_multi_compartment_neuron.html#Multi-compartment-neurons">26. Multi-compartment neurons</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../nxcore_tutorials.html">NxCore Tutorials</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../modules.html">Nx SDK Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../performance-suite.html">NxSDK Performance Test Suite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../README.html">NxSDK Release History</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">NxSDK</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../tutorials.html">Tutorials</a> &raquo;</li>
        
          <li><a href="../nxnet_jupyter_tutorials.html">NxNet Jupyter Tutorials</a> &raquo;</li>
        
      <li><span class="section-number">1. </span>Compartment, CompartmentPrototype and Probes Setup</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># INTEL CORPORATION CONFIDENTIAL AND PROPRIETARY</span>
<span class="c1">#</span>
<span class="c1"># Copyright © 2018-2021 Intel Corporation.</span>
<span class="c1">#</span>
<span class="c1"># This software and the related documents are Intel copyrighted</span>
<span class="c1"># materials, and your use of them is governed by the express</span>
<span class="c1"># license under which they were provided to you (License). Unless</span>
<span class="c1"># the License provides otherwise, you may not use, modify, copy,</span>
<span class="c1"># publish, distribute, disclose or transmit  this software or the</span>
<span class="c1"># related documents without Intel&#39;s prior written permission.</span>
<span class="c1">#</span>
<span class="c1"># This software and the related documents are provided as is, with</span>
<span class="c1"># no express or implied warranties, other than those that are</span>
<span class="c1"># expressly stated in the License.</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="o">%</span><span class="k">config</span> IPCompleter.greedy=True
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">nxsdk.api.n2a</span> <span class="k">as</span> <span class="nn">nx</span>
<span class="kn">from</span> <span class="nn">nxsdk.utils.plotutils</span> <span class="kn">import</span> <span class="n">plotRaster</span>
</pre></div>
</div>
</div>
<div class="section" id="Compartment,-CompartmentPrototype-and-Probes-Setup">
<h1><span class="section-number">1. </span>Compartment, CompartmentPrototype and Probes Setup<a class="headerlink" href="#Compartment,-CompartmentPrototype-and-Probes-Setup" title="Permalink to this headline">¶</a></h1>
<div class="section" id="Basic-compartment-with-probes">
<h2><span class="section-number">1.1. </span>Basic compartment with probes<a class="headerlink" href="#Basic-compartment-with-probes" title="Permalink to this headline">¶</a></h2>
<p>We create the simplest possible network consisting only of a single bias-driven compartment. The compartment voltage integrates the bias current and when it exceeds the membrane threshold, the compartment produces a spike, the voltage resets and the integration starts all over again. To monitor the compartment dynamics, we probe and plot the compartmentVoltage and spike output of the compartment.</p>
<p><img alt="Basic Compartment with Probe" src="../_images/jupyter_basic_compartment_with_probe.png" /></p>
<div class="section" id="Create-compartment">
<h3><span class="section-number">1.1.1. </span>Create compartment<a class="headerlink" href="#Create-compartment" title="Permalink to this headline">¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Create an empty network.</span>
<span class="n">net</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">NxNet</span><span class="p">()</span>
<span class="c1"># Create a compartment prototype from which one or more compartments can be created.</span>
<span class="c1"># We set the compartmentVoltageDecay to 0 which results in an integrate-and-fire neuron behavior.</span>
<span class="n">cxp</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">CompartmentPrototype</span><span class="p">(</span><span class="n">biasMant</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
                              <span class="n">biasExp</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span>
                              <span class="n">vThMant</span><span class="o">=</span><span class="mi">10000</span><span class="p">,</span>
                              <span class="n">compartmentVoltageDecay</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                              <span class="n">functionalState</span><span class="o">=</span><span class="n">nx</span><span class="o">.</span><span class="n">COMPARTMENT_FUNCTIONAL_STATE</span><span class="o">.</span><span class="n">IDLE</span><span class="p">)</span>
<span class="c1"># Create compartment from compartment prototype</span>
<span class="n">cx</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">createCompartment</span><span class="p">(</span><span class="n">cxp</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Create-compartment-probes">
<h3><span class="section-number">1.1.2. </span>Create compartment probes<a class="headerlink" href="#Create-compartment-probes" title="Permalink to this headline">¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Create optional probe conditions that determine at which interval probes are evaluated and when probing starts.</span>
<span class="n">vPc</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">IntervalProbeCondition</span><span class="p">(</span><span class="n">dt</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tStart</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">sPc</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">SpikeProbeCondition</span><span class="p">(</span><span class="n">dt</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tStart</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="c1"># Create a probe for the membrane potential and the output spikes.</span>
<span class="n">vProbe</span> <span class="o">=</span> <span class="n">cx</span><span class="o">.</span><span class="n">probe</span><span class="p">(</span><span class="n">nx</span><span class="o">.</span><span class="n">ProbeParameter</span><span class="o">.</span><span class="n">COMPARTMENT_VOLTAGE</span><span class="p">,</span> <span class="n">probeConditions</span><span class="o">=</span><span class="n">vPc</span><span class="p">)</span>
<span class="n">sProbe</span> <span class="o">=</span> <span class="n">cx</span><span class="o">.</span><span class="n">probe</span><span class="p">(</span><span class="n">nx</span><span class="o">.</span><span class="n">ProbeParameter</span><span class="o">.</span><span class="n">SPIKE</span><span class="p">,</span> <span class="n">probeConditions</span><span class="o">=</span><span class="n">sPc</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Run-network">
<h3><span class="section-number">1.1.3. </span>Run network<a class="headerlink" href="#Run-network" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Run network for 100 time steps and then disconnect from the board in order to free resources.</span>
<span class="n">net</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="n">net</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:  SLURM is being run in background
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:  Connecting to 134.134.68.81:18861
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:  N2Driver: Running...
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Compiling synapses... Done (0.00s)
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Processing probes... Done (0.00s)
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Writing modified registers... Done (0.00s)
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Initializing... Done (0.01s)
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Preparing input... Done (0.00s)
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Executing... Done (0.02s)
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Processing timeSeries... Done (0.01s)
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:  N2Driver: Finished (0.04s)
</pre></div></div>
</div>
</div>
<div class="section" id="Show-results">
<h3><span class="section-number">1.1.4. </span>Show results<a class="headerlink" href="#Show-results" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="c1"># Plot compartmentVoltage</span>
<span class="n">ax0</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">vProbe</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;COMPARTMENT_VOLTAGE&#39;</span><span class="p">)</span>
<span class="c1"># Plot spike train</span>
<span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="n">sProbe</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">ax0</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">())</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Time&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;SPIKE&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># As the compartmentVoltage exceeds its threshold at vThMant*2**6, the voltage resets and restarts integrating</span>
<span class="c1"># the bias current. Whenever the threshold is exceeded, the compartment emits a spike.</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/jupyter_a_compartment_setup_10_0.png" src="../_images/jupyter_a_compartment_setup_10_0.png" />
</div>
</div>
</div>
</div>
<div class="section" id="Compartment-with-compartmentVoltageDecay">
<h2><span class="section-number">1.2. </span>Compartment with compartmentVoltageDecay<a class="headerlink" href="#Compartment-with-compartmentVoltageDecay" title="Permalink to this headline">¶</a></h2>
<p>Next, we demonstrate the effect of a non-zero decay constant for the compartment voltage. As a refernce we also show the compartment dynamics without decay. Whenever, we deal with multiple compartments it is convenient to create and logically group them through a CompartmentGroup.</p>
<p><img alt="Compartment with Voltage Decay" src="../_images/jupyter_compartment_with_voltage_decay.png" /></p>
<div class="section" id="Create-compartmentGroup">
<h3><span class="section-number">1.2.1. </span>Create compartmentGroup<a class="headerlink" href="#Create-compartmentGroup" title="Permalink to this headline">¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">net</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">NxNet</span><span class="p">()</span>
<span class="c1"># Create prototypes for compartments with and without compartmentVoltageDecay. The decay constant is computed from the</span>
<span class="c1"># inverse time constant tauDecayV mapped to the 12 bit dynamic range of compartmentVoltageDecay.</span>
<span class="n">cxpRef</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">CompartmentPrototype</span><span class="p">(</span><span class="n">biasMant</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
                                 <span class="n">biasExp</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span>
                                 <span class="n">vThMant</span><span class="o">=</span><span class="mi">10000</span><span class="p">,</span>
                                 <span class="n">compartmentVoltageDecay</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                 <span class="n">functionalState</span><span class="o">=</span><span class="n">nx</span><span class="o">.</span><span class="n">COMPARTMENT_FUNCTIONAL_STATE</span><span class="o">.</span><span class="n">IDLE</span><span class="p">)</span>
<span class="n">tauDecayV</span> <span class="o">=</span> <span class="mi">15</span>
<span class="n">cxpDecayV</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">CompartmentPrototype</span><span class="p">(</span><span class="n">biasMant</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
                                   <span class="n">biasExp</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span>
                                   <span class="n">vThMant</span><span class="o">=</span><span class="mi">10000</span><span class="p">,</span>
                                   <span class="n">compartmentVoltageDecay</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">tauDecayV</span><span class="o">*</span><span class="mi">2</span><span class="o">**</span><span class="mi">12</span><span class="p">),</span>
                                   <span class="n">functionalState</span><span class="o">=</span><span class="n">nx</span><span class="o">.</span><span class="n">COMPARTMENT_FUNCTIONAL_STATE</span><span class="o">.</span><span class="n">IDLE</span><span class="p">)</span>
<span class="c1"># Create compartmentGroup from the two different prototypes. Here prototype can be a single or list of prototypes.</span>
<span class="c1"># If a list is provided, a prototypeMap is required which maps the prototypes to the 0..size-1 compartments in the group.</span>
<span class="n">cxGrp</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">createCompartmentGroup</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">prototype</span><span class="o">=</span><span class="p">[</span><span class="n">cxpRef</span><span class="p">,</span> <span class="n">cxpDecayV</span><span class="p">],</span> <span class="n">prototypeMap</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Create-compartment-probes-and-run-network">
<h3><span class="section-number">1.2.2. </span>Create compartment probes and run network<a class="headerlink" href="#Create-compartment-probes-and-run-network" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># The probe method of a compartmentGroup returns a ProbeSet object which allows to conveniently group multiple probes</span>
<span class="c1"># of the same type.</span>
<span class="p">(</span><span class="n">vProbes</span><span class="p">,</span> <span class="n">sProbes</span><span class="p">)</span> <span class="o">=</span> <span class="n">cxGrp</span><span class="o">.</span><span class="n">probe</span><span class="p">([</span><span class="n">nx</span><span class="o">.</span><span class="n">ProbeParameter</span><span class="o">.</span><span class="n">COMPARTMENT_VOLTAGE</span><span class="p">,</span> <span class="n">nx</span><span class="o">.</span><span class="n">ProbeParameter</span><span class="o">.</span><span class="n">SPIKE</span><span class="p">])</span>

<span class="n">net</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="n">net</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:  SLURM is being run in background
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:  Connecting to 134.134.68.81:18861
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:  N2Driver: Running...
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Compiling synapses... Done (0.00s)
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Processing probes... Done (0.00s)
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Writing modified registers... Done (0.01s)
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Initializing... Done (0.01s)
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Preparing input... Done (0.00s)
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Executing... Done (0.02s)
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Processing timeSeries... Done (0.01s)
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:  N2Driver: Finished (0.05s)
</pre></div></div>
</div>
</div>
<div class="section" id="id1">
<h3><span class="section-number">1.2.3. </span>Show results<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="c1"># Plot compartmentVoltages</span>
<span class="n">ax0</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">vh</span> <span class="o">=</span> <span class="n">vProbes</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="c1"># Plot spike trains</span>
<span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="n">sh</span> <span class="o">=</span> <span class="n">sProbes</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">colors</span><span class="o">=</span><span class="p">[</span><span class="n">vh</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_color</span><span class="p">(),</span> <span class="n">vh</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get_color</span><span class="p">()])</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">ax0</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">())</span>
<span class="n">ax0</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">vh</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Zero decay&#39;</span><span class="p">,</span> <span class="s1">&#39;Non-zero decay&#39;</span><span class="p">])</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">sh</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Zero decay&#39;</span><span class="p">,</span> <span class="s1">&#39;Non-zero decay&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/jupyter_a_compartment_setup_16_0.png" src="../_images/jupyter_a_compartment_setup_16_0.png" />
</div>
</div>
<p>As a result of the compartmentVoltageDecay, the compartmentVoltage of the second compartment increases sublinearly and therefore spikes at a lower frequency.</p>
</div>
</div>
<div class="section" id="Compartment-with-(stochastic)-compartmentVoltage">
<h2><span class="section-number">1.3. </span>Compartment with (stochastic) compartmentVoltage<a class="headerlink" href="#Compartment-with-(stochastic)-compartmentVoltage" title="Permalink to this headline">¶</a></h2>
<p>Uniform random noise can either be injected into the compartmentCurrent or compartmentVoltage via an LFSR random number generator. Here, we demonstrate randomization of the compartmentVoltage. Adding uniform random noise over time has the same effect as adding Gaussian noise.</p>
<p><img alt="Compartment with Stochastic Voltage" src="../_images/jupyter_compartment_with_stochastic_voltage.png" /></p>
<div class="section" id="id2">
<h3><span class="section-number">1.3.1. </span>Create compartmentGroup<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">net</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">NxNet</span><span class="p">()</span>
<span class="c1"># Create prototype for compartment without noise injection.</span>
<span class="n">cxp0</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">CompartmentPrototype</span><span class="p">(</span><span class="n">biasMant</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span>
                               <span class="n">biasExp</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span>
                               <span class="n">vThMant</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
                               <span class="n">functionalState</span><span class="o">=</span><span class="n">nx</span><span class="o">.</span><span class="n">COMPARTMENT_FUNCTIONAL_STATE</span><span class="o">.</span><span class="n">IDLE</span><span class="p">,</span>
                               <span class="n">logicalCoreId</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="c1"># Create prototype for compartment with stochastic compartmentVoltage. Due to the absence of a compartmentVoltageDecay</span>
<span class="c1"># and presence of a bias current, the compartmentVoltage changes by biasMant*2**biasExp + (LFSR()-2**7 +</span>
<span class="c1"># noiseMant*2**6)*2**(noiseExp-7) every time step, where LFSR() returns a random unsigned 8 bit integer.</span>
<span class="c1"># Since the noise mantissa and exponent are core-global settings, we force the two compartments using these prototypes</span>
<span class="c1"># onto two different logical neuro cores.</span>
<span class="n">cxp1</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">CompartmentPrototype</span><span class="p">(</span><span class="n">biasMant</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span>
                               <span class="n">biasExp</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span>
                               <span class="n">vThMant</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
                               <span class="n">enableNoise</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                               <span class="n">noiseMantAtCompartment</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                               <span class="n">noiseExpAtCompartment</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span>
                               <span class="n">functionalState</span><span class="o">=</span><span class="n">nx</span><span class="o">.</span><span class="n">COMPARTMENT_FUNCTIONAL_STATE</span><span class="o">.</span><span class="n">IDLE</span><span class="p">,</span>
                               <span class="n">logicalCoreId</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="c1"># Create compartmentGroup from the two different prototypes.</span>
<span class="n">cxGrp</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">createCompartmentGroup</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">prototype</span><span class="o">=</span><span class="p">[</span><span class="n">cxp0</span><span class="p">,</span> <span class="n">cxp1</span><span class="p">],</span> <span class="n">prototypeMap</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id3">
<h3><span class="section-number">1.3.2. </span>Create compartment probes and run network<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="p">(</span><span class="n">vProbes</span><span class="p">,</span> <span class="n">sProbes</span><span class="p">)</span> <span class="o">=</span> <span class="n">cxGrp</span><span class="o">.</span><span class="n">probe</span><span class="p">([</span><span class="n">nx</span><span class="o">.</span><span class="n">ProbeParameter</span><span class="o">.</span><span class="n">COMPARTMENT_VOLTAGE</span><span class="p">,</span> <span class="n">nx</span><span class="o">.</span><span class="n">ProbeParameter</span><span class="o">.</span><span class="n">SPIKE</span><span class="p">])</span>

<span class="n">net</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="n">net</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:  SLURM is being run in background
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:  Connecting to 134.134.68.81:18861
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:  N2Driver: Running...
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Compiling synapses... Done (0.00s)
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Processing probes... Done (0.00s)
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Writing modified registers... Done (0.01s)
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Initializing... Done (0.01s)
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Preparing input... Done (0.00s)
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Executing... Done (0.02s)
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Processing timeSeries... Done (0.01s)
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:  N2Driver: Finished (0.05s)
</pre></div></div>
</div>
</div>
<div class="section" id="id4">
<h3><span class="section-number">1.3.3. </span>Show results<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="c1"># Plot compartmentVoltages</span>
<span class="n">ax0</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">vh</span> <span class="o">=</span> <span class="n">vProbes</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="c1"># Plot spike trains</span>
<span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="n">sh</span> <span class="o">=</span> <span class="n">sProbes</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">colors</span><span class="o">=</span><span class="p">[</span><span class="n">vh</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_color</span><span class="p">(),</span> <span class="n">vh</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get_color</span><span class="p">()])</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">ax0</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">())</span>
<span class="n">ax0</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">vh</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;No noise&#39;</span><span class="p">,</span> <span class="s1">&#39;Stochastic compartmentVoltage&#39;</span><span class="p">])</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">vh</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;No noise&#39;</span><span class="p">,</span> <span class="s1">&#39;Stochastic compartmentVoltage&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># The first compartment integrates a constant bias current without compartmentVoltageDecay and therefore spikes at a</span>
<span class="c1"># constant frequency. The second compartment integrates a constant bias current with a superimposed noise current every</span>
<span class="c1"># time step. As a result, its compartmentVoltage has a strong random walk component.</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/jupyter_a_compartment_setup_23_0.png" src="../_images/jupyter_a_compartment_setup_23_0.png" />
</div>
</div>
</div>
</div>
<div class="section" id="Compartment-with-(stochastic)-refractoryDelay">
<h2><span class="section-number">1.4. </span>Compartment with (stochastic) refractoryDelay<a class="headerlink" href="#Compartment-with-(stochastic)-refractoryDelay" title="Permalink to this headline">¶</a></h2>
<p>Next, we demonstrate the effect of a non-zero refractoryDelay. When the refractoryDealy is non-zero, a compartment becomes inactive after a spike for the duration of the refractoryDelay. Besides randomizing the compartmentCurrent and compartmentVoltage, the refractoryDelay can also be randomized by adding uniform random noise. With such randomization the refractory period will vary after each spike.</p>
<p><img alt="Compartment with Stochastic Refractory Delay" src="../_images/jupyter_compartment_with_stochastic_refractory_delay.png" /></p>
<div class="section" id="id5">
<h3><span class="section-number">1.4.1. </span>Create compartmentGroup<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">net</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">NxNet</span><span class="p">()</span>
<span class="c1"># Create prototype for compartment with static refractoryDelay of 10.</span>
<span class="n">cxp0</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">CompartmentPrototype</span><span class="p">(</span><span class="n">biasMant</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
                               <span class="n">biasExp</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span>
                               <span class="n">vThMant</span><span class="o">=</span><span class="mi">10000</span><span class="p">,</span>
                               <span class="n">refractoryDelay</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
                               <span class="n">functionalState</span><span class="o">=</span><span class="n">nx</span><span class="o">.</span><span class="n">COMPARTMENT_FUNCTIONAL_STATE</span><span class="o">.</span><span class="n">IDLE</span><span class="p">,</span>
                               <span class="n">logicalCoreId</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="c1"># Create prototype for compartment with stochastic refractoryDelay of 10 + (LFSR()-2**7 + noiseMant*2**6)*2**(noiseExp-7)</span>
<span class="c1"># where LFSR() returns a random unsigned 8 bit integer. Since the noise mantissa and exponent are core-global settings, we</span>
<span class="c1"># force the two compartments using these prototypes onto two different logical neuro cores.</span>
<span class="n">cxp1</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">CompartmentPrototype</span><span class="p">(</span><span class="n">biasMant</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
                               <span class="n">biasExp</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span>
                               <span class="n">vThMant</span><span class="o">=</span><span class="mi">10000</span><span class="p">,</span>
                               <span class="n">refractoryDelay</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
                               <span class="n">thresholdBehavior</span><span class="o">=</span><span class="n">nx</span><span class="o">.</span><span class="n">COMPARTMENT_THRESHOLD_MODE</span><span class="o">.</span><span class="n">SPIKE_AND_RANDOMIZE_REFRACTORY_DELAY</span><span class="p">,</span>
                               <span class="n">noiseMantAtRefractoryDelay</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                               <span class="n">noiseExpAtRefractoryDelay</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                               <span class="n">functionalState</span><span class="o">=</span><span class="n">nx</span><span class="o">.</span><span class="n">COMPARTMENT_FUNCTIONAL_STATE</span><span class="o">.</span><span class="n">IDLE</span><span class="p">,</span>
                               <span class="n">logicalCoreId</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="c1"># Create compartmentGroup from the two different prototypes.</span>
<span class="n">cxGrp</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">createCompartmentGroup</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">prototype</span><span class="o">=</span><span class="p">[</span><span class="n">cxp0</span><span class="p">,</span> <span class="n">cxp1</span><span class="p">],</span> <span class="n">prototypeMap</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id6">
<h3><span class="section-number">1.4.2. </span>Create compartment probes and run network<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="p">(</span><span class="n">vProbes</span><span class="p">,</span> <span class="n">sProbes</span><span class="p">)</span> <span class="o">=</span> <span class="n">cxGrp</span><span class="o">.</span><span class="n">probe</span><span class="p">([</span><span class="n">nx</span><span class="o">.</span><span class="n">ProbeParameter</span><span class="o">.</span><span class="n">COMPARTMENT_VOLTAGE</span><span class="p">,</span> <span class="n">nx</span><span class="o">.</span><span class="n">ProbeParameter</span><span class="o">.</span><span class="n">SPIKE</span><span class="p">])</span>

<span class="n">net</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="n">net</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:  SLURM is being run in background
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:  Connecting to 134.134.68.81:18861
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:  N2Driver: Running...
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Compiling synapses... Done (0.00s)
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Processing probes... Done (0.00s)
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Writing modified registers... Done (0.01s)
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Initializing... Done (0.01s)
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Preparing input... Done (0.00s)
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Executing... Done (0.02s)
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Processing timeSeries... Done (0.01s)
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:  N2Driver: Finished (0.04s)
</pre></div></div>
</div>
</div>
<div class="section" id="id7">
<h3><span class="section-number">1.4.3. </span>Show results<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="c1"># Plot compartmentVoltages</span>
<span class="n">ax0</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">vh</span> <span class="o">=</span> <span class="n">vProbes</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="c1"># Plot spike trains</span>
<span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="n">sh</span> <span class="o">=</span> <span class="n">sProbes</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">colors</span><span class="o">=</span><span class="p">[</span><span class="n">vh</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_color</span><span class="p">(),</span> <span class="n">vh</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get_color</span><span class="p">()])</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">ax0</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">())</span>
<span class="n">ax0</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">vh</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Static refractoryDelay&#39;</span><span class="p">,</span> <span class="s1">&#39;Stochastic refractoryDelay&#39;</span><span class="p">])</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">vh</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Static refractoryDelay&#39;</span><span class="p">,</span> <span class="s1">&#39;Stochastic refractoryDelay&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># Both compartments integrate the bias current at the same rate and spike when the respective membrance potential exceeds</span>
<span class="c1"># the threshold. However, whereas the refractoryDelay of the first neuron always lasts for 10 time steps, the</span>
<span class="c1"># refractoryDelay of the second neuron varies stochastically around a baseline of 10 time steps.</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/jupyter_a_compartment_setup_29_0.png" src="../_images/jupyter_a_compartment_setup_29_0.png" />
</div>
</div>
</div>
</div>
<div class="section" id="Set-membrane-potential-threshold-VTh">
<h2><span class="section-number">1.5. </span>Set membrane potential threshold VTh<a class="headerlink" href="#Set-membrane-potential-threshold-VTh" title="Permalink to this headline">¶</a></h2>
<p>At the NxCore level, there are two ways of configuring vth: set vthProfileCfg and set somaStates. For setting details, please refer to nxcore/tutorial_10_membrane_potential_threshold.py.</p>
<p>At the NxNet level, vth can be configured as a discrete parameter by setting useDiscreteVTh. When useDiscreteVTh is disabled, vth is set for each threshold using the shared vthProfileCfg. When useDiscreteVTh is enabled, vth is discretely set without using the shared vthProfileCfg. Use of discrete vth comes at a cost of execution time and power. With shared vthProfileCfg, a maximum of 8 thresholds can be created when useDiscreteVTh is disabled. With useDiscreteVTh enabled, more than 8 thresholds
can be configured without sharing vthProfileCfg. In the example below, 10 compartments are created with useDiscreteVTh enabled, each compartment has a different membrane potential threshold.</p>
<div class="section" id="Create-compartments">
<h3><span class="section-number">1.5.1. </span>Create compartments<a class="headerlink" href="#Create-compartments" title="Permalink to this headline">¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">net</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">NxNet</span><span class="p">()</span>

<span class="c1"># create one compartment with discrete vth setting</span>
<span class="n">pDiscrete</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">CompartmentPrototype</span><span class="p">(</span><span class="n">biasMant</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
                                    <span class="n">biasExp</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span>
                                    <span class="n">vThMant</span><span class="o">=</span><span class="mi">900</span><span class="p">,</span>
                                    <span class="n">functionalState</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                                    <span class="n">compartmentCurrentDecay</span><span class="o">=</span><span class="mi">409</span><span class="p">,</span>
                                    <span class="n">compartmentVoltageDecay</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span>
                                    <span class="n">useDiscreteVTh</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                    <span class="n">logicalCoreId</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">cxDiscrete</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">createCompartment</span><span class="p">(</span><span class="n">pDiscrete</span><span class="p">)</span>

<span class="c1"># create one compartment with shared vth setting</span>
<span class="n">pShared</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">CompartmentPrototype</span><span class="p">(</span><span class="n">biasMant</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span>
                                  <span class="n">biasExp</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span>
                                  <span class="n">vThMant</span><span class="o">=</span><span class="mi">700</span><span class="p">,</span>
                                  <span class="n">functionalState</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                                  <span class="n">compartmentCurrentDecay</span><span class="o">=</span><span class="mi">409</span><span class="p">,</span>
                                  <span class="n">compartmentVoltageDecay</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span>
                                  <span class="n">useDiscreteVTh</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                  <span class="n">logicalCoreId</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">cxShared</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">createCompartment</span><span class="p">(</span><span class="n">pShared</span><span class="p">)</span>

<span class="c1"># create 10 compartments with discrete vth setting, each has different membrane potential</span>
<span class="c1"># threshold specified in voltageVec</span>
<span class="n">cxGrp</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">createCompartmentGroup</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">voltageVec</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span> <span class="mi">1300</span><span class="p">,</span> <span class="mi">50</span><span class="p">))</span>
<span class="n">numCompartments</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">voltageVec</span><span class="p">)</span>

<span class="k">for</span> <span class="n">cxId</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">numCompartments</span><span class="p">):</span>
    <span class="c1"># Prototypes</span>
    <span class="n">voltageVal</span> <span class="o">=</span> <span class="n">voltageVec</span><span class="p">[</span><span class="n">cxId</span><span class="p">]</span>
    <span class="n">pbasic</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">CompartmentPrototype</span><span class="p">(</span><span class="n">biasMant</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
                                     <span class="n">biasExp</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span>
                                     <span class="n">vThMant</span><span class="o">=</span><span class="n">voltageVal</span><span class="p">,</span>
                                     <span class="n">functionalState</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                                     <span class="n">compartmentCurrentDecay</span><span class="o">=</span><span class="mi">409</span><span class="p">,</span>
                                     <span class="n">compartmentVoltageDecay</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span>
                                     <span class="n">useDiscreteVTh</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                     <span class="n">logicalCoreId</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="c1"># Group of compartments</span>
    <span class="n">cxGrp</span><span class="o">.</span><span class="n">addCompartments</span><span class="p">(</span><span class="n">net</span><span class="o">.</span><span class="n">createCompartment</span><span class="p">(</span><span class="n">pbasic</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id8">
<h3><span class="section-number">1.5.2. </span>Create compartment probes and run network<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="p">(</span><span class="n">discreteVProbes</span><span class="p">,</span> <span class="n">discreteSProbes</span><span class="p">)</span> <span class="o">=</span> <span class="n">cxDiscrete</span><span class="o">.</span><span class="n">probe</span><span class="p">([</span><span class="n">nx</span><span class="o">.</span><span class="n">ProbeParameter</span><span class="o">.</span><span class="n">COMPARTMENT_VOLTAGE</span><span class="p">,</span><span class="n">nx</span><span class="o">.</span><span class="n">ProbeParameter</span><span class="o">.</span><span class="n">SPIKE</span><span class="p">])</span>

<span class="p">(</span><span class="n">sharedVProbes</span><span class="p">,</span> <span class="n">sharedSProbes</span><span class="p">)</span> <span class="o">=</span> <span class="n">cxShared</span><span class="o">.</span><span class="n">probe</span><span class="p">([</span><span class="n">nx</span><span class="o">.</span><span class="n">ProbeParameter</span><span class="o">.</span><span class="n">COMPARTMENT_VOLTAGE</span><span class="p">,</span><span class="n">nx</span><span class="o">.</span><span class="n">ProbeParameter</span><span class="o">.</span><span class="n">SPIKE</span><span class="p">])</span>

<span class="p">(</span><span class="n">vProbes</span><span class="p">,</span> <span class="n">sProbes</span><span class="p">)</span> <span class="o">=</span> <span class="n">cxGrp</span><span class="o">.</span><span class="n">probe</span><span class="p">([</span><span class="n">nx</span><span class="o">.</span><span class="n">ProbeParameter</span><span class="o">.</span><span class="n">COMPARTMENT_VOLTAGE</span><span class="p">,</span> <span class="n">nx</span><span class="o">.</span><span class="n">ProbeParameter</span><span class="o">.</span><span class="n">SPIKE</span><span class="p">])</span>

<span class="n">net</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="n">net</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:  SLURM is being run in background
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:  Connecting to 134.134.68.81:18861
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:  N2Driver: Running...
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Compiling synapses... Done (0.00s)
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Processing probes... Done (0.00s)
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Writing modified registers... Done (0.01s)
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Initializing... Done (0.01s)
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Preparing input... Done (0.00s)
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Executing... Done (0.03s)
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Processing timeSeries... Done (0.02s)
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:  N2Driver: Finished (0.06s)
</pre></div></div>
</div>
</div>
<div class="section" id="id9">
<h3><span class="section-number">1.5.3. </span>Show results<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="c1"># Plot compartmentVoltages for cxDiscrete and cxShared</span>
<span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Compartment voltage for cxDiscret and cxShared&#39;</span><span class="p">)</span>
<span class="n">discreteVProbes</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">vh0</span> <span class="o">=</span> <span class="n">sharedVProbes</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">color</span><span class="o">=</span><span class="n">vh0</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_color</span><span class="p">()</span>

<span class="c1"># Plot spike trains for cxDiscrete and cxShared</span>
<span class="n">ax2</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Spikes for cxDiscret and cxShared&#39;</span><span class="p">)</span>
<span class="n">discreteSProbes</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">vh1</span> <span class="o">=</span> <span class="n">sharedSProbes</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">vh1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">ax1</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">())</span>

<span class="c1"># Plot compartmentVoltages for cxGrp</span>
<span class="n">ax3</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">vh</span> <span class="o">=</span> <span class="n">vProbes</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>

<span class="c1"># Plot spike trains for cxGrp</span>
<span class="n">ax4</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">sProbes</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">colors</span><span class="o">=</span><span class="p">[</span><span class="n">vh</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_color</span><span class="p">(),</span><span class="n">vh</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get_color</span><span class="p">(),</span><span class="n">vh</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">get_color</span><span class="p">(),</span><span class="n">vh</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">get_color</span><span class="p">(),</span><span class="n">vh</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">get_color</span><span class="p">(),</span>
                     <span class="n">vh</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">get_color</span><span class="p">(),</span><span class="n">vh</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span><span class="o">.</span><span class="n">get_color</span><span class="p">(),</span><span class="n">vh</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span><span class="o">.</span><span class="n">get_color</span><span class="p">(),</span><span class="n">vh</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span><span class="o">.</span><span class="n">get_color</span><span class="p">(),</span><span class="n">vh</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span><span class="o">.</span><span class="n">get_color</span><span class="p">()])</span>
<span class="n">ax4</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">ax1</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">())</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># Compartment cxDiscrete and cxShared are created with vth being set with and without useDiscreteVTh being enabled</span>
<span class="c1"># respectively. 10 compartments in cxGrp are indivisually created without sharing vthProfileCfg, each has its own membrane</span>
<span class="c1"># potential threshold</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/jupyter_a_compartment_setup_35_0.png" src="../_images/jupyter_a_compartment_setup_35_0.png" />
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="b_connecting_compartments.html" class="btn btn-neutral float-right" title="2. Connecting compartments" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../nxnet_jupyter_tutorials.html" class="btn btn-neutral float-left" title="NxNet Jupyter Tutorials" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2018-2021, Intel Corporation.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>